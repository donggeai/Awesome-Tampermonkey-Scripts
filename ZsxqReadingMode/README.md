# 知识星球阅读模式增强器

一个专为知识星球设计的油猴脚本，提供纯净的阅读体验，让你专注于内容本身。

## ✨ 功能特性

### 🎯 核心功能
- **一键切换阅读模式**：点击右下角浮动按钮即可进入/退出阅读模式
- **智能隐藏干扰元素**：自动隐藏左右侧边栏和顶部导航栏
- **自动展开内容**：进入阅读模式时自动点击所有"展开全部"按钮
- **滚动智能展开**：滚动过程中自动展开新出现的内容
- **位置记忆功能**：切换模式时保持当前阅读位置不变

### 🎨 界面优化
- **宽屏居中布局**：内容区域居中显示，最大宽度1000px，提供更舒适的阅读体验
- **时间轴优化**：时间轴贴合内容右侧，不重叠遮挡内容
- **卡片式设计**：每个话题采用卡片式布局，视觉层次清晰
- **现代化UI**：右下角渐变按钮、柔和阴影，不干扰阅读
- **状态提示**：操作时在右下角显示友好的通知消息

### 🔧 智能特性
- **状态持久化**：记住用户的阅读模式偏好
- **SPA路由支持**：支持知识星球的单页应用路由切换
- **性能优化**：智能检测页面加载状态，避免重复初始化

## 🚀 安装使用

### 前置要求
- 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展
- 支持的浏览器：Chrome、Firefox、Safari、Edge

### 安装步骤
1. 点击 [安装脚本](https://greasyfork.org/zh-CN/scripts/541540-%E7%9F%A5%E8%AF%86%E6%98%9F%E7%90%83%E9%98%85%E8%AF%BB%E6%A8%A1%E5%BC%8F%E5%A2%9E%E5%BC%BA%E5%99%A8)
2. Tampermonkey 会自动打开安装页面
3. 点击「安装」按钮完成安装

### 手动安装
1. 复制 `ZsxqReadingMode.user.js` 文件内容
2. 打开 Tampermonkey 管理面板
3. 点击「添加新脚本」
4. 粘贴脚本内容并保存
5. 访问任意知识星球页面即可使用

### 使用方法
1. **进入阅读模式**：点击页面右上角的「📖 阅读模式」按钮
2. **退出阅读模式**：点击「🔙 退出阅读」按钮
3. **自动展开**：进入阅读模式后会自动展开所有内容
4. **滚动阅读**：向下滚动时会自动展开新出现的内容

## 🎯 适用页面

脚本会在以下页面自动激活：
- `https://wx.zsxq.com/group/*` - 所有知识星球群组页面

## 🔧 技术实现

### 核心技术
- **CSS选择器定位**：基于实际HTML结构精确定位元素
- **MutationObserver**：监听DOM变化，支持SPA路由
- **LocalStorage**：持久化用户偏好设置
- **定时器管理**：智能的内容展开和滚动监听

### 关键元素定位
根据提供的HTML文件分析，脚本定位以下关键元素：

```javascript
// 左侧边栏：星球列表
.group-list-container, app-group-list

// 右侧边栏：星球信息
.group-preview-wrapper, app-group-info

// 主内容区域
.topic-flow-container

// 展开按钮
.showAll

// 内容容器
.talk-content-container .content
```

### 样式优化
- **响应式布局**：内容区域自适应屏幕宽度
- **视觉层次**：通过阴影和圆角提升视觉体验
- **动画效果**：平滑的过渡动画和悬停效果

## ⚙️ 配置选项

脚本内置以下可配置参数：

```javascript
const CONFIG = {
    buttonText: '📖 阅读模式',           // 按钮文本
    exitButtonText: '🔙 退出阅读',       // 退出按钮文本
    autoExpandDelay: 500,              // 自动展开延迟(ms)
    scrollCheckInterval: 1000,         // 滚动检查间隔(ms)
    storageKey: 'zsxq_reading_mode'    // 本地存储键名
};
```

## 🐛 故障排除

### 常见问题

**Q: 脚本没有生效？**
A: 请检查：
- Tampermonkey是否正确安装并启用
- 脚本是否已保存并启用
- 页面URL是否匹配 `https://wx.zsxq.com/group/*`

**Q: 阅读模式按钮没有出现？**
A: 请等待页面完全加载，脚本会在检测到主要内容后自动创建按钮

**Q: 自动展开功能不工作？**
A: 脚本会持续监听页面变化，如果某些内容没有展开，可能是因为：
- 内容还在加载中
- 元素结构发生了变化

### 调试信息

脚本会在浏览器控制台输出调试信息：
```
[知识星球阅读模式] 脚本已初始化
[知识星球阅读模式] 已启用阅读模式
[知识星球阅读模式] 自动展开了 X 个内容
```

## 📝 更新日志

### v1.0.0 (2025-07-02)
- 🎉 首次发布，实现基础阅读模式功能
- ✨ 支持自动展开内容和位置记忆
- 🎨 优化界面设计和用户体验：
  - 阅读模式按钮移至右下角
  - 隐藏顶部导航栏
  - 内容区域宽度优化至1000px
  - 优化时间轴位置布局

## 📞 联系开发者

<table>
<tr>
<td align="center">
<img src="../assets/东哥说AI_wechat.png" alt="个人微信：donggeai02" width="200"/><br/>
<strong>个人微信</strong><br/>
扫码添加开发者微信<br/>
与开发者面对面交流
</td>
<td align="center">
<img src="../assets/东哥说AI_ai_tools_wechat_group.png" alt="微信交流群：实用工具分享" width="200"/><br/>
<strong>AI工具微信交流群</strong><br/>
加入用户交流群<br/>
分享使用经验和建议
</td>
<td align="center">
<img src="../assets/东哥说AI_wechat_official_account.jpg" alt="微信公众号：东哥说AI" width="200"/><br/>
<strong>微信公众号</strong><br/>
关注获取最新动态<br/>
第一时间了解新功能
</td>
</tr>
</table>

## ❗ 注意事项

⚠️ **重要提醒**:
- 请在使用前仔细阅读脚本说明文档
- 建议在测试环境中先试用脚本
- 如遇到问题，请先查看上方FAQ部分
- 不要在重要会议中首次使用未测试的脚本

📋 **使用建议**:
- 定期更新脚本到最新版本
- 关注项目动态，及时了解重要更新
- 遇到问题时提供详细的环境信息和错误描述
- 尊重知识星球的使用条款和服务协议

## 🌟 支持项目

如果这个脚本对你有帮助，请考虑：

- ⭐ **给项目点星**: 在GitHub上给项目点个星，让更多人发现
- 🔄 **分享推荐**: 向朋友和同事推荐这个实用工具
- 💬 **反馈建议**: 提供使用反馈和改进建议
- 🤝 **参与贡献**: 贡献代码、文档或测试

---

**⭐ 如果这个脚本对你有帮助，请给项目点个星！**

**🐛 遇到问题？** [提交Issue](https://github.com/donggeai/Awesome-Tampermonkey-Scripts/issues)

**💡 有建议？** [参与讨论](https://github.com/donggeai/Awesome-Tampermonkey-Scripts/discussions)

**📧 商务合作**: 请通过上方微信联系